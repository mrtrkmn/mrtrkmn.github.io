<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>error: no space left on this device | mrturkmen</title><meta name=keywords content="terminal,linux,docker,storage,default,error"><meta name=description content="How to solve issue of 'No space left on device' which is caused by Docker. "><meta name=author content="mrturkmen"><link rel=canonical href=https://mrturkmen.com/posts/no-space-left-on-device/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.839fe99cb5ea0d169fdc108f59fbf1631bdbed0ccf594cb8ed162d2e1b5ae188.css integrity="sha256-g5/pnLXqDRaf3BCPWfvxYxvb7QzPWUy47RYtLhta4Yg=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=https://mrturkmen.com/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=https://mrturkmen.com/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=https://mrturkmen.com/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=https://mrturkmen.com/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=https://mrturkmen.com/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)}(window,document,'script','https://www.google-analytics.com/analytics.js','ga'),ga('create','UA-165248542-1','auto'),ga('send','pageview'))</script><meta property="og:title" content="error: no space left on this device "><meta property="og:description" content="How to solve issue of 'No space left on device' which is caused by Docker. "><meta property="og:type" content="article"><meta property="og:url" content="https://mrturkmen.com/posts/no-space-left-on-device/"><meta property="og:image" content="https://mrturkmen.com/images/docker_logo.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2020-05-18T00:00:03+00:00"><meta property="article:modified_time" content="2020-05-18T00:00:03+00:00"><meta property="og:site_name" content="Ahmet Turkmen"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://mrturkmen.com/images/docker_logo.png"><meta name=twitter:title content="error: no space left on this device "><meta name=twitter:description content="How to solve issue of 'No space left on device' which is caused by Docker. "><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://mrturkmen.com/posts/"},{"@type":"ListItem","position":2,"name":"error: no space left on this device ","item":"https://mrturkmen.com/posts/no-space-left-on-device/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"error: no space left on this device ","name":"error: no space left on this device ","description":"How to solve issue of 'No space left on device' which is caused by Docker. ","keywords":["terminal","linux","docker","storage","default","error"],"articleBody":"Summary In this post, one of the well known (-open to discuss :)-) error of “No space left on device” which is caused due to Docker will be solved with different approaches.\nNote: “No space left on device” error can be caused due to any other reason than docker itself. Hence, it would be nice to make sure that the error is caused due to docker volumes.\nYou can check whether it is caused due to docker volumes or not by following steps over here\nNote that the explanations and examples may differ according to your environment, hence instead of taking these information as rules, applying them as a reference would be much better approach.\nThe system information for particular scenario described on post is given below:\nSystem information  PRETTY_NAME: Debian GNU/Linux 9 (stretch) NAME: Debian GNU/Linux VERSION_ID: 9 VERSION: 9 (stretch) KERNEL_RELEASE: 4.9.0-6-amd64  Docker daemon version Engine:\n Version: 19.03.8 API version: 1.40 (minimum version 1.12) Go version: go1.12.17 Git commit: afacb8b7f0 Built: Wed Mar 11 01:24:36 2020 OS/Arch: linux/amd64 Experimental: false  Although, it is NOT fully required to have same or somehow closer version of OS and Docker daemon, it could be nice to know exactly which conditions the following fix can work.\nMost of the cases, the following information could be valid for all Debian based systems however it is not for sure.\nThe Problem Docker can be used for most of the cases although now Kubernetes or any other orchestration systems preffered to used. That kind of orchestration systems may not cause this problem, hence they mostly provide auto scaling and runs on cloud. However, when you have a server with all responsibility, you may face this exact problem.\nThe problem is installation of docker into any system with default settings may create head ache in the future. If you are planning to use docker, intensively, the main reason of that, docker is generally using\n /var/lib/docker  place for docker volumes. In most scenarios, servers do not use root path for storing information, instead the appropriate approach for storing information on server is creating data volumes which has huge capacity and ability to extend or shrink time to time. The problem starts to show off itself when docker containers have been used for long period of time.\nEnsure about the problem It is quite handy to check whether the error of “No space left on device” caused by docker volumes. To do that following simple bash commands can be used.\n$ df -h /var/lib This will display free and used disk space for /var/lib path. Afterwards, you can see how is the difference between free and used spaces among usage percentage. An example is given below, it is taken from the system that I mentioned at the beginning in system information section.\n$ df -h /var/lib Filesystem Size Used Avail Use% Mounted on /dev/sda3 173G 162G 2.4G 99% / /dev/sda3 173G 162G 2.4G 99% / /dev/mapper/data-data 9.1T 402G 8.2T 5% /data udev 252G 0 252G 0% /dev /dev/sda3 173G 162G 2.4G 99% / /dev/sda3 173G 162G 2.4G 99% / /dev/sda3 173G 162G 2.4G 99% / /dev/sda3 173G 162G 2.4G 99% / /dev/sda3 173G 162G 2.4G 99% / /dev/sda3 173G 162G 2.4G 99% / /dev/sda3 173G 162G 2.4G 99% / /dev/sda3 173G 162G 2.4G 99% / /dev/sda3 173G 162G 2.4G 99% / /dev/sda3 173G 162G 2.4G 99% / proc 0 0 0 - /proc /dev/sda3 173G 162G 2.4G 99% / tmpfs 51G 275M 51G 1% /run /dev/sda3 173G 162G 2.4G 99% / /dev/nvme0n1 1.5T 775G 618G 56% /scratch /dev/sda3 173G 162G 2.4G 99% / sysfs 0 0 0 - /sys /dev/sda3 173G 162G 2.4G 99% / /dev/sda3 173G 162G 2.4G 99% / /dev/sda3 173G 162G 2.4G 99% / /dev/sda3 173G 162G 2.4G 99% / /dev/sda3 173G 162G 2.4G 99% / As you can observe from the output above, I have plenty of spaces for volume /dev/nvme0n1 and /dev/mapper/data-data, however I was getting “No space left on the device” error, because root path became full due to docker volumes.\nIt can be quickly checked by the command below.\n$ df /var/lib/docker Filesystem 1K-blocks Used Available Use% Mounted on /dev/sda3 180572828 166898524 4432040 98% / Temporary solution A temporary solution would be pruning docker volumes by running ;\n$ docker volume prune it will prune all volumes which are NOT in-use, if the volumes which are creating this bunch of data are in-use, prune command will not have any effect on the error. Although it works, it is a temporary solution, it may re-trigger the error in future. To resolve this issue permanently following approach could be used: Permanent Solution\nThe approach of having temporary solution can be extended with cronjobs, however, it is definitely not nice way of handling issues.\nHowever, it could be nice to have cron jobs which prune docker system time to time, because old docker images, containers and some other leftovers can create bunch of reclaimable storage. Docker prune commands do not have effect on resources (containers, volumes and networks) which are under use.\nYou can setup a cronjob which weekly prunes system, as provided below.\n$ crontab -e 0 0 * * 0 docker system prune -f # this will run at 00:00 on Sunday everyweek 0 0 * * 0 docker volume prune -f # will remove all (NOT in use) volumes weekly 0 0 * * 0 docker network prune -f # will remove all (NOT in use) networks  You can write a script according to your needs then place it to cron job as well. Before adding cron jobs, make sure $USER has valid permissions for docker group.\nNow, we are sure that the error caused due to docker volumes which means we can proceed with a permanent solution.\nIf it the error is not caused due to docker volumes, it could be caused from running short of inodes or basically not enough storage area.\nPermanent Solution Permanent solution is using one of storage volume for storing docker volumes, instead of using root path. These are the steps that you may take;\nStop docker service !\n$ systemctl stop docker Rsync all data under /var/lib/docker to other directory under storage volume\n$ mkdir -p /data/mnt # creates plave to use for docker volumes $ rsync -a /var/lib/docker /data/mnt/ # will sync everything  Rename default docker volumes path, this for taking a backup until we have success at the end.\n$ mv /var/lib/docker /var/lib/dockerbckp Create symbolic link to actual place\n$ ln -s /data/mnt/docker /var/lib/docker Enable DOCKER_OPTS\n$ vim /etc/default/docker DOCKER_OPTS=\"--dns 8.8.8.8 --dns 8.8.4.4 -g /data/mnt/docker\" Uncomment DOCEKR_OPTS add -g /data/mnt/docker as shown above in /etc/default/docker\nStart Docker daemon\n$ systemctl start docker If there was no error during implementation of steps, you can now test your setup.\nNote that thee should NOT be space between curly brackets when listing mount point only.\n$ docker volume create 2f2bd462b89c39bb641e7daf01048c5d811dd7796d7f89d250ea82c4532d2707 $ docker volume inspect --format { {.Mountpoint} } 2f2bd462b89c39b641e7daf01048c5d811dd7796d7f89d250ea82c4532d2707 /data/mnt/docker/volumes/2f2bd462b89c39bb641e7daf01048c5d811dd7796d7f89d250ea82c4532d2707/_data As you can observe above docker is using /data/mnt/docker for docker volumes, now we can safely remove old backup data. rm -rf /var/lib/dockerbckp\nI would like to mention that there is an information about changing docker volume instead implementing all steps mentioned above, just specifiying path under /etc/docker/daemon.js file would work (-example daemon.js is given-). However, when I tried that approach, it did not worked.\nExample\n$ vim /etc/docker/daemon.js { \"data-root\": \"/mnt/docker-data\", \"storage-driver\": \"overlay2\" } Check this documentation: https://docs.docker.com/config/daemon/systemd/I hope, this post can help others to find required information quickly and implement necessary steps to get to work.\nReferences:  https://github.com/moby/moby/issues/10613 https://github.com/moby/moby/issues/10613 https://success.docker.com/article/error-message-no-space-left-on-device-in-default-machine https://forums.docker.com/t/how-do-i-change-the-docker-image-installation-directory/1169  ","wordCount":"1258","inLanguage":"en","image":"https://mrturkmen.com/images/docker_logo.png","datePublished":"2020-05-18T00:00:03Z","dateModified":"2020-05-18T00:00:03Z","author":{"@type":"Person","name":"mrturkmen"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://mrturkmen.com/posts/no-space-left-on-device/"},"publisher":{"@type":"Organization","name":"mrturkmen","logo":{"@type":"ImageObject","url":"https://mrturkmen.com/%3Clink%20/%20abs%20url%3E"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script><header class=header><nav class=nav><div class=logo><a href=https://mrturkmen.com/ accesskey=h title="Home (Alt + H)">Home</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://mrturkmen.com/archives/ title=Archive><span>Archive</span></a></li><li><a href=https://mrturkmen.com/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://mrturkmen.com/>Home</a>&nbsp;»&nbsp;<a href=https://mrturkmen.com/posts/>Posts</a></div><h1 class=post-title>error: no space left on this device</h1><div class=post-description>How to solve issue of 'No space left on device' which is caused by Docker.</div><div class=post-meta><span title="2020-05-18 00:00:03 +0000 UTC">May 18, 2020</span>&nbsp;·&nbsp;6 min&nbsp;·&nbsp;mrturkmen&nbsp;|&nbsp;<a href=https://github.com/mrtrkmn/mrtrkmn.github.io/edit/master/content/posts/no-space-left-on-device.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><figure class=entry-cover><img loading=lazy src=https://mrturkmen.com/images/docker_logo.png alt><p></p></figure><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#summary aria-label=Summary>Summary</a><ul><li><a href=#system-information aria-label="System information">System information</a></li><li><a href=#docker-daemon-version aria-label="Docker daemon version">Docker daemon version</a></li></ul></li><li><a href=#the-problem aria-label="The Problem">The Problem</a><ul><li><a href=#ensure-about-the-problem aria-label="Ensure about the problem">Ensure about the problem</a></li><li><a href=#temporary-solution aria-label="Temporary solution">Temporary solution</a></li></ul></li><li><a href=#permanent-solution aria-label="Permanent Solution">Permanent Solution</a></li><li><a href=#references aria-label=References:>References:</a></li></ul></div></details></div><div class=post-content><h1 id=summary>Summary<a hidden class=anchor aria-hidden=true href=#summary>#</a></h1><p>In this post, one of the well known (-open to discuss :)-) error of &ldquo;No space left on device&rdquo; <strong>which is caused due to Docker</strong> will be solved with different approaches.</p><p>Note: &ldquo;No space left on device&rdquo; error can be caused due to any other reason than docker itself. Hence, it would be nice to make sure that the error is caused due to docker volumes.</p><p>You can check whether it is caused due to docker volumes or not by following steps over <a href=#ensure-about-the-problem>here</a></p><p>Note that the explanations and examples may differ according to your environment, hence instead of taking these information as rules, applying them as a reference would be much better approach.</p><p>The system information for particular scenario described on post is given below:</p><h2 id=system-information>System information<a hidden class=anchor aria-hidden=true href=#system-information>#</a></h2><ul><li><strong>PRETTY_NAME:</strong> Debian GNU/Linux 9 (stretch)</li><li><strong>NAME:</strong> Debian GNU/Linux</li><li><strong>VERSION_ID:</strong> 9</li><li><strong>VERSION:</strong> 9 (stretch)</li><li><strong>KERNEL_RELEASE:</strong> 4.9.0-6-amd64</li></ul><h2 id=docker-daemon-version>Docker daemon version<a hidden class=anchor aria-hidden=true href=#docker-daemon-version>#</a></h2><p><strong>Engine:</strong></p><ul><li>Version: 19.03.8</li><li>API version: 1.40 (minimum version 1.12)</li><li>Go version: go1.12.17</li><li>Git commit: afacb8b7f0</li><li>Built: Wed Mar 11 01:24:36 2020</li><li>OS/Arch: linux/amd64</li><li>Experimental: false</li></ul><p>Although, it is NOT fully required to have same or somehow closer version of OS and Docker daemon, it could be nice to know exactly which conditions the following fix can work.</p><p>Most of the cases, the following information could be valid for all Debian based systems however it is not for sure.</p><h1 id=the-problem>The Problem<a hidden class=anchor aria-hidden=true href=#the-problem>#</a></h1><p>Docker can be used for most of the cases although now Kubernetes or any other orchestration systems preffered to used. That kind of orchestration systems may not cause this problem, hence they mostly provide auto scaling and runs on cloud. However, when you have a server with all responsibility, you may face this exact problem.</p><p>The problem is installation of docker into any system with default settings may create head ache in the future. If you are planning to use docker, intensively, the main reason of that, docker is generally using</p><ul><li><code>/var/lib/docker</code></li></ul><p>place for docker volumes. In most scenarios, servers do not use root path for storing information, instead the appropriate approach for storing information on server is creating data volumes which has huge capacity and ability to extend or shrink time to time. The problem starts to show off itself when docker containers have been used for long period of time.</p><h2 id=ensure-about-the-problem>Ensure about the problem<a hidden class=anchor aria-hidden=true href=#ensure-about-the-problem>#</a></h2><p>It is quite handy to check whether the error of &ldquo;No space left on device&rdquo; caused by docker volumes. To do that following simple bash commands can be used.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ df -h /var/lib
</code></pre></div><p>This will display free and used disk space for <code>/var/lib</code> path. Afterwards, you can see how is the difference between free and used spaces among usage percentage. An example is given below, it is taken from the system that I mentioned at the beginning in <a href=#system-information>system information</a> section.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ df -h /var/lib

Filesystem             Size  Used Avail Use% Mounted on
/dev/sda3              173G  162G  2.4G  99% /
/dev/sda3              173G  162G  2.4G  99% /
/dev/mapper/data-data  9.1T  402G  8.2T   5% /data
udev                   252G     <span style=color:#ae81ff>0</span>  252G   0% /dev
/dev/sda3              173G  162G  2.4G  99% /
/dev/sda3              173G  162G  2.4G  99% /
/dev/sda3              173G  162G  2.4G  99% /
/dev/sda3              173G  162G  2.4G  99% /
/dev/sda3              173G  162G  2.4G  99% /
/dev/sda3              173G  162G  2.4G  99% /
/dev/sda3              173G  162G  2.4G  99% /
/dev/sda3              173G  162G  2.4G  99% /
/dev/sda3              173G  162G  2.4G  99% /
/dev/sda3              173G  162G  2.4G  99% /
proc                      <span style=color:#ae81ff>0</span>     <span style=color:#ae81ff>0</span>     <span style=color:#ae81ff>0</span>    - /proc
/dev/sda3              173G  162G  2.4G  99% /
tmpfs                   51G  275M   51G   1% /run
/dev/sda3              173G  162G  2.4G  99% /
/dev/nvme0n1           1.5T  775G  618G  56% /scratch
/dev/sda3              173G  162G  2.4G  99% /
sysfs                     <span style=color:#ae81ff>0</span>     <span style=color:#ae81ff>0</span>     <span style=color:#ae81ff>0</span>    - /sys
/dev/sda3              173G  162G  2.4G  99% /
/dev/sda3              173G  162G  2.4G  99% /
/dev/sda3              173G  162G  2.4G  99% /
/dev/sda3              173G  162G  2.4G  99% /
/dev/sda3              173G  162G  2.4G  99% /
</code></pre></div><p>As you can observe from the output above, I have plenty of spaces for volume <code>/dev/nvme0n1</code> and <code>/dev/mapper/data-data</code>, however I was getting &ldquo;No space left on the device&rdquo; error, because root path became full due to docker volumes.</p><p>It can be quickly checked by the command below.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>
$ df /var/lib/docker

Filesystem     1K-blocks      Used Available Use% Mounted on
/dev/sda3      <span style=color:#ae81ff>180572828</span> <span style=color:#ae81ff>166898524</span>   <span style=color:#ae81ff>4432040</span>  98% /
</code></pre></div><h2 id=temporary-solution>Temporary solution<a hidden class=anchor aria-hidden=true href=#temporary-solution>#</a></h2><p>A temporary solution would be pruning docker volumes by running ;</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ docker volume prune 
</code></pre></div><p>it will prune all volumes which are NOT in-use, if the volumes which are creating this bunch of data are in-use, prune command will not have any effect on the error. Although it works, it is a temporary solution, it may re-trigger the error in future. To resolve this issue permanently following approach could be used: <a href=#permanent-solution>Permanent Solution</a></p><p>The approach of having temporary solution can be extended with cronjobs, however, it is definitely not nice way of handling issues.</p><p>However, it could be nice to have cron jobs which prune docker system time to time, because old docker images, containers and some other leftovers can create bunch of reclaimable storage. Docker prune commands do not have effect on resources (containers, volumes and networks) which are under use.</p><p>You can setup a cronjob which weekly prunes system, as provided below.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>
$ crontab -e 

<span style=color:#ae81ff>0</span> <span style=color:#ae81ff>0</span> * * <span style=color:#ae81ff>0</span> docker system prune -f  <span style=color:#75715e># this will run at 00:00 on Sunday everyweek</span>
<span style=color:#ae81ff>0</span> <span style=color:#ae81ff>0</span> * * <span style=color:#ae81ff>0</span> docker volume prune -f <span style=color:#75715e># will remove all (NOT in use) volumes weekly</span>
<span style=color:#ae81ff>0</span> <span style=color:#ae81ff>0</span> * * <span style=color:#ae81ff>0</span> docker network prune -f <span style=color:#75715e># will remove all (NOT in use) networks </span>

</code></pre></div><p><em>You can write a script according to your needs then place it to cron job as well. Before adding cron jobs, make sure $USER has valid permissions for docker group.</em></p><p>Now, we are sure that the error caused due to docker volumes which means we can proceed with a permanent solution.</p><p>If it the error is not caused due to docker volumes, it could be caused from running short of inodes or basically not enough storage area.</p><h1 id=permanent-solution>Permanent Solution<a hidden class=anchor aria-hidden=true href=#permanent-solution>#</a></h1><p>Permanent solution is using one of storage volume for storing docker volumes, instead of using root path. These are the steps that you may take;</p><p><strong>Stop docker service !</strong></p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash> $ systemctl stop docker
</code></pre></div><p><strong>Rsync all data under <code>/var/lib/docker</code> to other directory under storage volume</strong></p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash> $ mkdir -p /data/mnt  <span style=color:#75715e># creates plave to use for docker volumes</span>
 $ rsync -a /var/lib/docker /data/mnt/  <span style=color:#75715e># will sync everything </span>
</code></pre></div><p><strong>Rename default docker volumes path, this for taking a backup until we have success at the end.</strong></p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash> $ mv /var/lib/docker /var/lib/dockerbckp
</code></pre></div><p><strong>Create symbolic link to actual place</strong></p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash> $ ln -s /data/mnt/docker /var/lib/docker 
</code></pre></div><p><strong>Enable <code>DOCKER_OPTS</code></strong></p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ vim /etc/default/docker
 DOCKER_OPTS<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;--dns 8.8.8.8 --dns 8.8.4.4 -g /data/mnt/docker&#34;</span>
</code></pre></div><p>Uncomment <code>DOCEKR_OPTS</code> add <code>-g /data/mnt/docker</code> as shown above in <code>/etc/default/docker</code></p><p><strong>Start Docker daemon</strong></p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ systemctl start docker
</code></pre></div><p>If there was no error during implementation of steps, you can now test your setup.</p><p><em>Note that thee should NOT be space between curly brackets when listing mount point only.</em></p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ docker volume create 
2f2bd462b89c39bb641e7daf01048c5d811dd7796d7f89d250ea82c4532d2707
$ docker volume inspect --format <span style=color:#f92672>{</span> <span style=color:#f92672>{</span>.Mountpoint<span style=color:#f92672>}</span> <span style=color:#f92672>}</span> 2f2bd462b89c39b641e7daf01048c5d811dd7796d7f89d250ea82c4532d2707 
/data/mnt/docker/volumes/2f2bd462b89c39bb641e7daf01048c5d811dd7796d7f89d250ea82c4532d2707/_data
</code></pre></div><p>As you can observe above docker is using <code>/data/mnt/docker</code> for docker volumes, now we can safely remove old backup data. <code>rm -rf /var/lib/dockerbckp</code></p><p>I would like to mention that there is an information about changing docker volume instead implementing all steps mentioned above, just specifiying path under <code>/etc/docker/daemon.js</code> file would work (-example daemon.js is given-). However, when I tried that approach, it did not worked.</p><p><strong>Example</strong></p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ vim /etc/docker/daemon.js

<span style=color:#f92672>{</span>
 <span style=color:#e6db74>&#34;data-root&#34;</span>: <span style=color:#e6db74>&#34;/mnt/docker-data&#34;</span>,
 <span style=color:#e6db74>&#34;storage-driver&#34;</span>: <span style=color:#e6db74>&#34;overlay2&#34;</span>
<span style=color:#f92672>}</span>
</code></pre></div><p><em>Check this documentation:</em> <a href=https://docs.docker.com/config/daemon/systemd/>https://docs.docker.com/config/daemon/systemd/</a></p><p>I hope, this post can help others to find required information quickly and implement necessary steps to get to work.</p><h1 id=references>References:<a hidden class=anchor aria-hidden=true href=#references>#</a></h1><ul><li><a href=https://github.com/moby/moby/issues/10613>https://github.com/moby/moby/issues/10613</a></li><li><a href=https://github.com/moby/moby/issues/10613>https://github.com/moby/moby/issues/10613</a></li><li><a href=https://success.docker.com/article/error-message-no-space-left-on-device-in-default-machine>https://success.docker.com/article/error-message-no-space-left-on-device-in-default-machine</a></li><li><a href=https://forums.docker.com/t/how-do-i-change-the-docker-image-installation-directory/1169>https://forums.docker.com/t/how-do-i-change-the-docker-image-installation-directory/1169</a></li></ul></div><footer class=post-footer><ul class=post-tags><li><a href=https://mrturkmen.com/tags/terminal/>terminal</a></li><li><a href=https://mrturkmen.com/tags/linux/>linux</a></li><li><a href=https://mrturkmen.com/tags/docker/>docker</a></li><li><a href=https://mrturkmen.com/tags/storage/>storage</a></li><li><a href=https://mrturkmen.com/tags/default/>default</a></li><li><a href=https://mrturkmen.com/tags/error/>error</a></li></ul><nav class=paginav><a class=prev href=https://mrturkmen.com/posts/setup-free-vpn/><span class=title>« Prev</span><br><span>wireguard: set it up in few steps</span></a>
<a class=next href=https://mrturkmen.com/posts/elasticsearch-performans-art%C4%B1r%C4%B1m%C4%B1/><span class=title>Next »</span><br><span>elasticsearch: performans artırımı</span></a></nav><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share error: no space left on this device  on twitter" href="https://twitter.com/intent/tweet/?text=error%3a%20no%20space%20left%20on%20this%20device%20&url=https%3a%2f%2fmrturkmen.com%2fposts%2fno-space-left-on-device%2f&hashtags=terminal%2clinux%2cdocker%2cstorage%2cdefault%2cerror"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share error: no space left on this device  on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fmrturkmen.com%2fposts%2fno-space-left-on-device%2f&title=error%3a%20no%20space%20left%20on%20this%20device%20&summary=error%3a%20no%20space%20left%20on%20this%20device%20&source=https%3a%2f%2fmrturkmen.com%2fposts%2fno-space-left-on-device%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share error: no space left on this device  on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fmrturkmen.com%2fposts%2fno-space-left-on-device%2f&title=error%3a%20no%20space%20left%20on%20this%20device%20"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share error: no space left on this device  on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fmrturkmen.com%2fposts%2fno-space-left-on-device%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share error: no space left on this device  on whatsapp" href="https://api.whatsapp.com/send?text=error%3a%20no%20space%20left%20on%20this%20device%20%20-%20https%3a%2f%2fmrturkmen.com%2fposts%2fno-space-left-on-device%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share error: no space left on this device  on telegram" href="https://telegram.me/share/url?text=error%3a%20no%20space%20left%20on%20this%20device%20&url=https%3a%2f%2fmrturkmen.com%2fposts%2fno-space-left-on-device%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></div></footer></article></main><footer class=footer><span>&copy; 2022 <a href=https://mrturkmen.com/>mrturkmen</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById('menu');menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script><script defer src=https://static.cloudflareinsights.com/beacon.min.js data-cf-beacon='{"token": "866620f03a6a4a5d9b8e6cd46edf203e"}'></script></body></html>